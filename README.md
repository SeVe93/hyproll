# hyproll
hyproll.sh — bash-скрипт для Hyprland, реализующий «dock-подобное» свёртывание окон в нижнюю часть экрана.

50 строк чистого (+jq) баша.
Очень легкое и функциональное решение распределения пространства Hyprland

Основная функциональность:
Создает "свернутую" панель окон в нижней части экрана, похожую на док или панель задач.

Как работает:

Находит все окна на текущем workspace.

Определяет положение верхней части выбранного окна относительно "зоны сворачивания" (FOLD_THRESHOLD=50)px.

Все окна, чье верхнее значение FOLD_THRESHOLD совпадает с "зоной сворачивания" - опускаются ниже уровня экрана,
оставляя только шапку.

Перераспределяет все свернутые окна с равными промежутками (WINDOW_SPACING)px с лева направа, либо справа налево, в зависимости
от выбранной переменной: DIRECTION="left" (либо right).

Перераспределяет "свернутые" окна при повторном применении скрипта  (сворачивании окна)
(мгновенного триггера без ущерба производительности пока не придумал...).


Автоматическое определение монитора - получает размеры активного монитора.
Работа с активным рабочим пространством - обрабатывает только окна текущего workspace.
"Сворачивание" окон - окна ниже определенного порога (FOLD_THRESHOLD) считаются свернутыми.

----------------------------------------------------------------------

Переменные конфигурации:

WINDOW_SPACING=100 - расстояние между окнами
FOLD_THRESHOLD=50  - порог для определения свернутых окон
RECALC_DELAY=0.1   - задержка перед перерасчетом позиций
DIRECTION="left"   - или "right" -  направление размещения окон

----------------------------------------------------------------------
Зависимости:

hyprland - оконный менеджер
https://hypr.land/

hyprplugins/hyprbar - шапка
https://github.com/hyprwm/hyprland-plugins

jq - для работы с JSON
sudo pacman -S jq



----------------------------------------------------------------------
Пример конфига Hyprland и запуск:

Помещаем скрипт в папку конфига Hyprland 
~/.config/hypr/hyproll.sh

Делаем исполняемым
chmod +x ~/.config/hypr/hyproll.sh

Устанавливаем jq - для работы с JSON
sudo pacman -S jq

В начало конфига (плагины hyprland. в них нужно будет активировать hyprbar):

#В начало конфига
exec-once = hyprpm reload

#Бинд для "Сворачивания"
bind = SUPER, A, exec, ~/.config/hypr/hyproll.sh

#пример конфига hyprbars:
plugin {
    hyprbars {
        bar_height = 25
        icon_on_hover = true
        bar_color = rgb(252530)
        col.text = rgb(466670)
        bar_text_font = Sans
        bar_text_size = 10
        bar_text_align = left
        bar_padding = 10
        bar_button_padding = 6
        hyprbars-button = rgb(8c3737), 12, , hyprctl dispatch killactive
        
        #Вот это наш корешь
        hyprbars-button = rgb(3e6963), 12, , ~/.config/hypr/hyproll.sh
        
        hyprbars-button = rgb(466670), 12, , hyprctl dispatch togglefloating
        on_double_click = hyprctl dispatch fullscreen 1
    }   
}










